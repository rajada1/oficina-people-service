#
# New Relic Java Agent Configuration
# For more information: https://docs.newrelic.com/docs/agents/java-agent/configuration/java-agent-configuration-config-file
#

common: &default_settings
  # ============================== LICENSE KEY ===============================
  # You must specify the license key associated with your New Relic account.
  # This key binds the Java agent's data to your account in the New Relic service.
  license_key: "${NEW_RELIC_LICENSE_KEY}"

  # ============================== AGENT ENABLED =============================
  # Use this setting to disable the agent instead of removing it from the startup command.
  agent_enabled: true

  # ============================== APPLICATION NAME ==========================
  # Set the name of your application as you'd like it show up in New Relic.
  # If enable_auto_app_naming is false, the agent reports all data to this application.
  # Otherwise, the agent reports only background tasks (transactions for non-web applications)
  # to this application. To report data to more than one application, separate application names
  # with a semicolon. For example, to report data to "My Application" and "My Application 2"
  # specify app_name: My Application;My Application 2
  # This setting is required. Up to 3 different application names can be specified.
  app_name: Oficina People Service - ${NEW_RELIC_ENVIRONMENT:dev}

  # ============================== DISTRIBUTED TRACING =======================
  distributed_tracing:
    enabled: true

  # ============================== THREAD PROFILER ===========================
  thread_profiler:
    enabled: true

  # ============================== TRANSACTION TRACER ========================
  transaction_tracer:
    enabled: true
    transaction_threshold: apdex_f
    record_sql: obfuscated
    explain_enabled: true
    explain_threshold: 500
    stack_trace_threshold: 500

  # ============================== ERROR COLLECTOR ===========================
  error_collector:
    enabled: true
    ignore_errors: com.newrelic.agent.TokenException
    ignore_status_codes: 404

  # ============================== BROWSER MONITORING ========================
  browser_monitoring:
    auto_instrument: false

  # ============================== APPLICATION LOGGING =======================
  application_logging:
    enabled: true
    forwarding:
      enabled: true
      max_samples_stored: 10000
    local_decorating:
      enabled: true
    metrics:
      enabled: true

  # ============================== CUSTOM INSTRUMENTATION ====================
  # Configuration for custom instrumentation
  class_transformer:
    com.newrelic.instrumentation.spring-aop-2:
      enabled: true

  # ============================== LABELS ====================================
  # Labels are name-value pairs used to categorize the Agent's host, application, etc.
  labels:
    Environment: ${NEW_RELIC_ENVIRONMENT:dev}
    Service: oficina-people-service
    Team: Grupo99

# Environment Specific Settings
development:
  <<: *default_settings
  app_name: Oficina People Service - Development

staging:
  <<: *default_settings
  app_name: Oficina People Service - Staging

production:
  <<: *default_settings
  app_name: Oficina People Service - Production
  audit_mode: false
  log_level: info
